# interpreting the backtesting report

understanding the metrics and plots generated by a backtest report is crucial for accurately assessing a trading strategy's performance, risk profile, and overall viability. this document provides a detailed explanation of how to interpret both the visual plots and the quantitative metrics.

## interpreting the plots

the interactive html plots generated by the backtesting tool provide a powerful visual representation of a strategy's performance and behavior over time. hereâ€™s how to interpret the key elements:

### a. axes
-   **x-axis (horizontal)**: always represents time (date and time). it shows the progression of the backtest from the start date to the end date.
-   **y-axis (vertical)**: usually represents either equity value (for the main equity curve) or price (for the asset's candlestick chart). indicators are often plotted on the same y-axis as the price or in their own sub-panels.

### b. equity curve
-   **what it is**: the continuous line that shows the evolution of the portfolio's total value (initial cash + profit/loss from trades) over the backtesting period. it typically starts at the initial cash amount.
-   **what to look for**:
    -   **upward trend (good performance)**: indicates a profitable strategy. a consistently steep upward slope is ideal.
    -   **downward trend (poor performance)**: indicates a losing strategy. a steep downward slope suggests significant capital erosion.
    -   **smoothness vs. choppiness**: a smoother curve might suggest a less volatile or more consistent strategy. a very choppy curve with sharp peaks and troughs implies higher volatility and potentially higher risk, or frequent small gains/losses.
    -   **drawdowns**: dips in the equity curve signify periods where the portfolio value has fallen from a previous high. these are crucial for assessing risk:
        -   **depth**: how far down does the curve dip? (maximum drawdown)
        -   **duration**: how long does it take for the curve to recover to its previous high? (maximum drawdown duration)
        -   **frequency**: how often do drawdowns occur?

### c. trade markers (buy/sell points)
-   **what they are**: typically triangles or other markers overlaid on the price chart, indicating when the strategy initiated a buy (long entry) or a sell (short entry/long exit). buy markers usually point up, sell markers point down.
-   **what to look for**:
    -   **alignment with signals**: observe if the trades align with the intended signals from your strategy's logic (e.g., does a buy marker appear precisely when a moving average crossover occurs?). this helps verify the strategy's implementation.
    -   **profitability of trades**: follow the price movement immediately after a trade marker. does the price generally move in the direction the strategy predicted for that trade?
    -   **trade location**: are trades initiated at significant points (e.g., breakouts, reversals) or randomly?
    -   **clustering**: sometimes trades might cluster in certain market conditions. this can give insights into when the strategy is most active or effective.

### d. indicators
-   **what they are**: lines or other graphical elements (e.g., moving averages, rsi, macd) overlaid on the price chart or in separate sub-panels.
-   **what to look for**:
    -   **relationship to price**: how do the indicators move in relation to the asset's price? do they lead, lag, or move concurrently?
    -   **signal generation**: do the trades (markers) consistently occur when the indicators generate a signal (e.g., ma crossover, rsi exiting overbought/oversold regions)? this helps verify the strategy's logic and visualizes its triggers.

### e. volume
-   **what it is**: typically displayed as bars at the bottom of the plot, showing the trading volume for each period.
-   **what to look for**:
    -   **trade confirmation**: trades occurring on high volume might indicate stronger conviction behind a price move.
    -   **market interest**: high volume often accompanies significant price movements or reversals, which can confirm signal strength.

### f. zooming and panning
-   the interactive nature of the plot allows you to zoom in on specific periods (e.g., during drawdowns or strong trends) to examine individual trades and indicator behavior in detail. you can pan across the timeline to view different parts of the backtest. this interactivity is crucial for debugging and fine-tuning a strategy.

by combining the visual insights from the plots with the quantitative metrics, you can gain a much deeper understanding of your strategy's strengths, weaknesses, and overall performance characteristics.

## interpreting strategy parameters

strategy parameters are the configurable values that define a strategy's behavior. they are crucial for tailoring a strategy to specific market conditions, assets, or risk appetites. understanding how to interpret these parameters is key to effective backtesting, optimization, and eventual live trading.

-   **purpose**: parameters allow for flexibility and fine-tuning of a strategy's logic. changing a parameter can significantly alter when a strategy enters or exits trades, how much risk it takes, and ultimately its profitability.
-   **examples**: common parameters include moving average periods (e.g., fast ma period, slow ma period), rsi periods and thresholds (e.g., rsi period, oversold threshold, overbought threshold), bollinger band periods and standard deviation multipliers (e.g., bb period, bb std dev), and risk management settings (e.g., risk percent, stop-loss pct, take-profit pct).
-   **tuning and optimization**: backtesting tools often allow for optimizing parameters across a range of values to find the combination that yields the best performance according to chosen metrics (e.g., highest sharpe ratio).
-   **impact on strategy behavior**:
    -   **shorter periods (e.g., ma periods, rsi periods)**: tend to make a strategy more sensitive to recent price action, leading to more frequent trades and potentially earlier signals, but also more false signals (whipsaws).
    -   **longer periods**: tend to make a strategy less sensitive, resulting in fewer trades, delayed signals, but potentially more reliable trends.
    -   **thresholds (e.g., rsi thresholds)**: define the sensitivity of overbought/oversold conditions. tighter thresholds (e.g., 20/80 for rsi) lead to fewer, more extreme signals, while wider thresholds (e.g., 30/70) generate more signals.
    -   **risk management parameters**: directly control the capital risked per trade, the maximum acceptable loss, and the target profit. these are fundamental to managing overall portfolio risk.

## interpreting the metrics

understanding the metrics generated by a backtest report is crucial for accurately assessing a trading strategy's performance, risk profile, and overall viability. this document provides a detailed explanation of each key metric.

### return [%]
-   **definition**: the total percentage gain or loss of the strategy over the backtesting period, relative to the initial equity.
-   **significance**: a primary measure of profitability. a higher positive return indicates a more profitable strategy.

### buy & hold return [%]
-   **definition**: the percentage gain or loss if one had simply bought the asset at the beginning of the backtest and held it until the end, relative to the initial equity.
-   **significance**: provides a benchmark. if the strategy's return is significantly lower than buy & hold, it suggests the strategy might be underperforming a passive investment.

### return (ann.) [%]
-   **definition**: the annualized return of the strategy, providing a normalized measure of performance over a year.
-   **significance**: allows for comparison of strategies run over different durations.

### volatility (ann.) [%]
-   **definition**: the annualized standard deviation of the strategy's daily returns, representing the degree of variation in returns.
-   **significance**: a measure of risk. higher volatility implies higher risk.

### cagr [%] (compound annual growth rate)
-   **definition**: the mean annual growth rate of the strategy's investments over a specified period longer than one year, compounded.
-   **significance**: represents the smooth, geometric mean growth rate of the investment.

### sharpe ratio
-   **definition**: measures the excess return (strategy return minus risk-free rate) per unit of total risk (standard deviation of returns). a common proxy for the risk-free rate is typically 0%, especially for short periods or if not specified.
-   **formula**: $s = \frac{r_p - r_f}{\sigma_p}$
    -   $r_p$: portfolio return
    -   $r_f$: risk-free rate
    -   $\sigma_p$: standard deviation of portfolio's excess return
-   **significance**: the primary metric for risk-adjusted return. a higher sharpe ratio indicates a better return for the amount of risk taken. as per `gemini.md`, this is the **primary metric** for comparing strategies.

### sortino ratio
-   **definition**: similar to the sharpe ratio, but measures excess return per unit of *downside* risk (standard deviation of negative returns).
-   **formula**: $so = \frac{r_p - r_f}{\sigma_d}$
    -   $r_p$: portfolio return
    -   $r_f$: risk-free rate
    -   $\sigma_d$: standard deviation of downside (negative) returns
-   **significance**: focuses on bad volatility. a higher sortino ratio indicates better returns for the downside risk taken. useful for strategies where upside volatility is not considered "risk."

### calmar ratio
-   **definition**: measures the average annual return relative to the maximum drawdown.
-   **formula**: $c = \frac{cagr}{max. drawdown}$
-   **significance**: evaluates risk by comparing return to the worst historical loss. a higher calmar ratio implies better return per unit of maximum risk exposure.

### alpha [%]
-   **definition**: measures a strategy's performance relative to a benchmark index (e.g., s&p 500). a positive alpha indicates outperformance against the benchmark, adjusted for risk.
-   **significance**: indicates the value added by the strategy manager.

### beta
-   **definition**: measures the volatility of a strategy relative to a benchmark index. a beta of 1 means the strategy moves with the market, >1 means more volatile, <1 means less volatile.
-   **significance**: measures systematic risk.

### max. drawdown [%]
-   **definition**: the largest percentage drop from a peak in equity to a subsequent trough.
-   **significance**: a critical measure of risk, indicating the worst-case historical loss experienced by the strategy.

### avg. drawdown [%]
-   **definition**: the average percentage drop across all drawdown periods.
-   **significance**: provides a general sense of how severe typical drawdowns are.

### max. drawdown duration
-   **definition**: the longest period of time (from peak to new peak) that the strategy's equity was below a previous high.
-   **significance**: measures how long capital can be tied up during underperforming periods.

### avg. drawdown duration
-   **definition**: the average duration of all trades.
-   **significance**: provides a general sense of how long capital is typically deployed in a single trade.

### # trades
-   **definition**: the total number of trades executed during the backtest.
-   **significance**: indicates the activity level of the strategy. a high number of trades can lead to increased commission costs.

### win rate [%]
-   **definition**: the percentage of profitable trades out of the total number of trades.
-   **significance**: measures the consistency of winning trades.

### best trade [%]
-   **definition**: the percentage return of the single most profitable trade.
-   **significance**: highlights the potential upside of a single successful trade.

### r. worst trade [%]
-   **definition**: the percentage return of the single least profitable trade.
-   **significance**: highlights the potential downside of a single unsuccessful trade.

### s. avg. trade [%]
-   **definition**: the average percentage return across all trades.
-   **significance**: provides a general idea of the typical profitability per trade.

### t. max. trade duration
-   **definition**: the duration of the longest trade (from entry to exit).
-   **significance**: can indicate if the strategy is short-term or long-term oriented.

### u. avg. trade duration
-   **definition**: the average duration of all trades.
-   **significance**: provides a general sense of how long capital is typically deployed in a single trade.

### v. profit factor
-   **definition**: the ratio of gross profits to gross losses.
-   **formula**: $pf = \frac{\text{gross profit}}{\text{gross loss}}$
-   **significance**: a measure of trading efficiency. a profit factor greater than 1 indicates a profitable strategy.

### w. expectancy [%]
-   **definition**: the average expected profit or loss per trade, expressed as a percentage of the capital risked per trade.
-   **significance**: quantifies the average profitability of a trade over the long run.

### x. sqn (system quality number)
-   **definition**: a measure of the overall quality of a trading system, developed by van k. tharp. it relates the expectancy of the system to the standard deviation of its returns.
-   **formula**: $sqn = \frac{\text{expectancy}}{\text{stddev}(\text{trade returns})} \times \sqrt{\text{number of trades}}$
-   **significance**: a higher sqn indicates a more robust and scalable trading system. tharp suggests sqn values:
    -   1.6 - 1.9: poor
    -   2.0 - 2.4: average
    -   2.5 - 2.9: good
    -   3.0 - 5.0: excellent
    -   5.1 - 6.9: superb
    -   7.0 - +: holy grail