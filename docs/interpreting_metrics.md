# interpreting backtesting metrics

understanding the metrics generated by a backtest report is crucial for accurately assessing a trading strategy's performance, risk profile, and overall viability. this document provides a detailed explanation of each key metric.

### return [%]
-   **definition**: the total percentage gain or loss of the strategy over the backtesting period, relative to the initial equity.
-   **significance**: a primary measure of profitability. a higher positive return indicates a more profitable strategy.

### buy & hold return [%]
-   **definition**: the percentage gain or loss if one had simply bought the asset at the beginning of the backtest and held it until the end, relative to the initial equity.
-   **significance**: provides a benchmark. if the strategy's return is significantly lower than buy & hold, it suggests the strategy might be underperforming a passive investment.

### return (ann.) [%]
-   **definition**: the annualized return of the strategy, providing a normalized measure of performance over a year.
-   **significance**: allows for comparison of strategies run over different durations.

### volatility (ann.) [%]
-   **definition**: the annualized standard deviation of the strategy's daily returns, representing the degree of variation in returns.
-   **significance**: a measure of risk. higher volatility implies higher risk.

### cagr [%] (compound annual growth rate)
-   **definition**: the mean annual growth rate of the strategy's investments over a specified period longer than one year, compounded.
-   **significance**: represents the smooth, geometric mean growth rate of the investment.

### sharpe ratio
-   **definition**: measures the excess return (strategy return minus risk-free rate) per unit of total risk (standard deviation of returns). a common proxy for the risk-free rate is typically 0%, especially for short periods or if not specified.
-   **formula**: $s = \frac{r_p - r_f}{\sigma_p}$
    -   $r_p$: portfolio return
    -   $r_f$: risk-free rate
    -   $\sigma_p$: standard deviation of portfolio's excess return
-   **significance**: the primary metric for risk-adjusted return. a higher sharpe ratio indicates a better return for the amount of risk taken. as per `gemini.md`, this is the **primary metric** for comparing strategies.

### sortino ratio
-   **definition**: similar to the sharpe ratio, but measures excess return per unit of *downside* risk (standard deviation of negative returns).
-   **formula**: $so = \frac{r_p - r_f}{\sigma_d}$
    -   $r_p$: portfolio return
    -   $r_f$: risk-free rate
    -   $\sigma_d$: standard deviation of downside (negative) returns
-   **significance**: focuses on bad volatility. a higher sortino ratio indicates better returns for the downside risk taken. useful for strategies where upside volatility is not considered "risk."

### calmar ratio
-   **definition**: measures the average annual return relative to the maximum drawdown.
-   **formula**: $c = \frac{cagr}{max. drawdown}$
-   **significance**: evaluates risk by comparing return to the worst historical loss. a higher calmar ratio implies better return per unit of maximum risk exposure.

### alpha [%]
-   **definition**: measures a strategy's performance relative to a benchmark index (e.g., s&p 500). a positive alpha indicates outperformance against the benchmark, adjusted for risk.
-   **significance**: indicates the value added by the strategy manager.

### beta
-   **definition**: measures the volatility of a strategy relative to a benchmark index. a beta of 1 means the strategy moves with the market, >1 means more volatile, <1 means less volatile.
-   **significance**: measures systematic risk.

### max. drawdown [%]
-   **definition**: the largest percentage drop from a peak in equity to a subsequent trough.
-   **significance**: a critical measure of risk, indicating the worst-case historical loss experienced by the strategy.

### avg. drawdown [%]
-   **definition**: the average percentage drop across all drawdown periods.
-   **significance**: provides a general sense of how severe typical drawdowns are.

### max. drawdown duration
-   **definition**: the longest period of time (from peak to new peak) that the strategy's equity was below a previous high.
-   **significance**: measures how long capital can be tied up during underperforming periods.

### avg. drawdown duration
-   **definition**: the average duration of all trades.
-   **significance**: provides a general sense of how long capital is typically deployed in a single trade.

### # trades
-   **definition**: the total number of trades executed during the backtest.
-   **significance**: indicates the activity level of the strategy. a high number of trades can lead to increased commission costs.

### win rate [%]
-   **definition**: the percentage of profitable trades out of the total number of trades.
-   **significance**: measures the consistency of winning trades.

### best trade [%]
-   **definition**: the percentage return of the single most profitable trade.
-   **significance**: highlights the potential upside of a single successful trade.

### r. worst trade [%]
-   **definition**: the percentage return of the single least profitable trade.
-   **significance**: highlights the potential downside of a single unsuccessful trade.

### s. avg. trade [%]
-   **definition**: the average percentage return across all trades.
-   **significance**: provides a general idea of the typical profitability per trade.

### t. max. trade duration
-   **definition**: the duration of the longest trade (from entry to exit).
-   **significance**: can indicate if the strategy is short-term or long-term oriented.

### u. avg. trade duration
-   **definition**: the average duration of all trades.
-   **significance**: provides a general sense of how long capital is typically deployed in a single trade.

### v. profit factor
-   **definition**: the ratio of gross profits to gross losses.
-   **formula**: $pf = \frac{\text{gross profit}}{\text{gross loss}}$
-   **significance**: a measure of trading efficiency. a profit factor greater than 1 indicates a profitable strategy.

### w. expectancy [%]
-   **definition**: the average expected profit or loss per trade, expressed as a percentage of the capital risked per trade.
-   **significance**: quantifies the average profitability of a trade over the long run.

### x. sqn (system quality number)
-   **definition**: a measure of the overall quality of a trading system, developed by van k. tharp. it relates the expectancy of the system to the standard deviation of its returns.
-   **formula**: $sqn = \frac{\text{expectancy}}{\text{stddev}(\text{trade returns})} \times \sqrt{\text{number of trades}}$
-   **significance**: a higher sqn indicates a more robust and scalable trading system. tharp suggests sqn values:
    -   1.6 - 1.9: poor
    -   2.0 - 2.4: average
    -   2.5 - 2.9: good
    -   3.0 - 5.0: excellent
    -   5.1 - 6.9: superb
    -   7.0 - +: holy grail

this detailed breakdown should provide a thorough understanding of the metrics presented in the backtesting reports.
